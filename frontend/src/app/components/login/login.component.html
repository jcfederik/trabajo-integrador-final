<div class="login-container">
  <div class="industrial-overlay"></div>
  
  <div class="login-card">
    <!-- Header con identidad del local -->
    <div class="login-header">
      <div class="logo-container">
        <i class="bi bi-gear-fill logo-icon"></i>
        <div>
          <h1 class="logo-text">INTEGRAL MAQ</h1>
          <p class="tagline">MOTOSIERRAS • MOTOGUADAÑAS • CORTACÉSPED</p>
        </div>
      </div>
      <p class="welcome-text">Sistema de Gestión Técnica</p>
    </div>

    <!-- Formulario -->
    <form #f="ngForm" (ngSubmit)="login(f)" class="login-form">
      
      <!-- Campo Usuario -->
      <div class="form-group">
        <label class="form-label">
          <i class="bi bi-person-gear icon"></i>
          Usuario
        </label>
        <input
          type="text"
          name="nombre"
          class="form-control"
          [class.is-invalid]="nombre.invalid && nombre.touched"
          [(ngModel)]="f.value.nombre"
          #nombre="ngModel"
          required
          placeholder="Ingresa tu usuario"
          (input)="clearError()"
        />
        <div *ngIf="nombre.invalid && nombre.touched" class="invalid-feedback">
          <i class="bi bi-exclamation-triangle"></i>
          El usuario es obligatorio
        </div>
      </div>

      <!-- Campo Contraseña -->
      <div class="form-group">
        <label class="form-label">
          <i class="bi bi-shield-lock icon"></i>
          Contraseña
        </label>
        <div class="password-container">
          <input
            [type]="showPassword ? 'text' : 'password'"
            name="password"
            class="form-control"
            [class.is-invalid]="password.invalid && password.touched"
            [(ngModel)]="f.value.password"
            #password="ngModel"
            required
            placeholder="Ingresa tu contraseña"
            (input)="clearError()"
          />
          <button type="button" class="password-toggle" (click)="togglePassword()">
            <i [class]="showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
          </button>
        </div>
        <div *ngIf="password.invalid && password.touched" class="invalid-feedback">
          <i class="bi bi-exclamation-triangle"></i>
          La contraseña es obligatoria
        </div>
      </div>

      <!-- Recordar usuario -->
      <div class="form-options">
        <label class="remember-me">
          <input type="checkbox" [(ngModel)]="rememberMe" name="rememberMe" />
          <span class="checkmark"></span>
          Recordar usuario
        </label>
      </div>

      <!-- Mensaje de error -->
      <div *ngIf="error" class="alert alert-error">
        <i class="bi bi-shield-exclamation"></i>
        <span>{{ error }}</span>
      </div>

      <!-- Botón de login CORREGIDO -->
      <button class="login-btn" type="submit" [disabled]="loading">
        <span *ngIf="!loading" class="btn-content">
          <i class="bi bi-tools"></i>
          Acceder al Sistema
        </span>
        <span *ngIf="loading" class="btn-content">
          <i class="bi bi-arrow-repeat spinner"></i>
          Iniciando sesión...
        </span>
      </button>

      <!-- Footer -->
      <div class="login-footer">
        <p class="help-text">
          <i class="bi bi-info-circle"></i>
          Servicio Técnico • Repuestos • Accesorios
        </p>
      </div>
    </form>
  </div>

  <!-- Background shapes -->
  <div class="background-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>
</div>